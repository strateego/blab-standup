# 15 March 2019
# or, Sketches of an API proposal for Samplify integration

## Screening results

Samplify makes an authenticated[^1] HTTPS `POST` request to a provided endpoint
(e.g. `https://example.com/api/qpcr-results`).

The request has an `application/rdml+xml` Content-Type, with a body payload
containing an [RDML file](http://rdml.org).

Each top-level `<sample>` element in the RDML document should contain `<xRef>`
elements for the sample, aliquot, and plate barcodes provided to NWGC by
Lea/BBI.

### Alternatively…

_This was my initial thinking, before I remembered RDML existed and would suit
our needs well._

The request has an `application/json` Content-Type, with a body payload like
the following:

    {
      // A unique identifier for this plate or screen or set of results; may be
      // generated by Samplify.  This is important for being able to trace
      // results we get back to your systems.
      //
      "identifier": "...",

      // A timestamp of some sort is useful, but it could be the run completion
      // time instead of run start time, for example.  Or both could be included.
      //
      "started": "2019-03-15T11:26:46-07:00",

      // Screening results, as an array of objects. This array should contain a
      // number of elements equal to the number of samples × targets × replicates.
      //
      "results": [
        {
          // IDs of the material provided by Lea/BBI
          "material": {
            "sample": "20e1d4a2",
            "aliquot": "3492492",
            "plate": "..."
          },

          // Position of well on screening plate/array card
          "position": {
            "row": "A",
            "column": 12
          },

          // TaqMan target name and overall positive vs. negative call
          "target": "FluA",
          "positive": true,

          // Array with one object for each replicate reaction run
          "replicates": [
            {
              // Cq is the standardized term recommended by MIQE and RDML covering Ct or Crt.
              "Cq": 20.314159,

              // Positive vs. negative call for just *this* replicate.
              "positive": true
            },
            ...
          ]
        },
        ...
      ]
    }


## Sequencing results

Samplify makes an authenticated[^1] HTTPS `POST` request to a provided endpoint
(e.g. `https://example.com/api/paired-reads`).

The request has an `application/json` Content-Type, with a body payload
containing …

<mark>_TKTK_</mark>


[^1]: Credentials for use with HTTP Basic Auth will be provided by Thomas to
  the Samplify team.
